(self.webpackChunk=self.webpackChunk||[]).push([[4125],{6902:e=>{e.exports="/images/folder.png?f48c9fe9d41e3aef0f5df46754524513"},4125:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var i=s(629),a=s(2640),r=s(6902),n=s.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={data:function(){return{activeChat:1,uploads:a.q6,folder_logo:n(),messageContent:null,chatId:null,recieverId:null,messageForm:{content:"",me:!0,created_at:"11:11am"},overlay:!1,sidebarMenu:!0,toggleMini:!1,themeSwitch:!1,theme:!1,settings:[{id:1,title:"My Account",icon:"mdi-shield-account",href:"/profileSettings"},{id:3,title:"Change Password",icon:"mdi-cog",href:"/passwordSettings"},{id:4,title:"Logout",icon:"mdi-key-outline",href:"/login"}]}},computed:l(l(l({mini:function(){return this.$vuetify.breakpoint.smAndDown||this.toggleMini}},(0,i.rn)(["selectedUser","chatDetails","myUserProfile","conversations","newMessages","userNotifications"])),(0,i.Se)(["messageAlert","getChatDetails","myUserProfile","userSelected","conversations","getNewMessages","getUserNotifications"])),{},{countNewNotifications:function(){return this.getUserNotifications.length>0?this.getUserNotifications.length:0},countNewMessages:function(){return this.getNewMessages.length>0?this.getNewMessages.length:0}}),mounted:function(){"light"==localStorage.getItem("theme")?(this.themeSwitch=!1,this.theme=!1):(this.themeSwitch=!0,this.theme=!0)},watch:{messageAlert:function(e){null!=e&&(this.chatId=this.$route.query.chatId,this.recieverId=this.$route.query.userId,this.$store.dispatch("getSelectedUserProfile",this.recieverId),this.$store.dispatch("getMyProfile"),this.$store.dispatch("fetchChatConversation",{chatId:this.chatId,recieverId:this.recieverId}),this.$store.dispatch("getChatDetails",{chatId:this.chatId,recieverId:this.recieverId}))},$route:function(e,t){this.chatId=this.$route.query.chatId,this.recieverId=this.$route.query.userId,this.$store.dispatch("fetchNewMessages"),this.$store.dispatch("getSelectedUserProfile",this.recieverId),this.$store.dispatch("fetchChatConversation",{chatId:this.chatId,recieverId:this.recieverId}),this.$store.dispatch("getChatDetails",{chatId:this.chatId,recieverId:this.recieverId}),this.$store.dispatch("fetchNewMessages"),this.$store.dispatch("fetchUserNotifications"),this.$store.dispatch("getMyProfile")},myUserProfile:function(e){null!=e&&e.level>1&&(this.settings[3]={id:5,title:"Admin",icon:"mdi-cog",href:"/admin"})},conversations:function(e){null!=e&&this.scrollToElement()}},beforeCreate:function(){this.$store.dispatch("getMyProfile")},created:function(){this.chatId=this.$route.query.chatId,this.recieverId=this.$route.query.userId,this.$store.dispatch("fetchNewMessages"),this.$store.dispatch("getSelectedUserProfile",this.recieverId),this.$store.dispatch("fetchChatConversation",{chatId:this.chatId,recieverId:this.recieverId}),this.$store.dispatch("getChatDetails",{chatId:this.chatId,recieverId:this.recieverId}),this.$store.dispatch("fetchNewMessages"),this.$store.dispatch("fetchUserNotifications"),this.$store.dispatch("getMyProfile")},methods:{switchTheme:function(e){e?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light"),console.log("THEME:::",e),setTimeout((function(){window.location.reload()}),500)},SendMessage:function(){"CUSTOMER_SERVICE"===this.getChatDetails.chatType&&(this.recieverId=this.myUserProfile.id);var e=new FormData;e.append("contentType","text"),e.append("message",this.messageContent),e.append("chatId",this.chatId),e.append("recieverId",this.recieverId),this.messageContent="",this.$store.dispatch("sendMessage",e)},handleImageChange:function(e){"CUSTOMER_SERVICE"===this.getChatDetails.chatType&&(this.recieverId=this.myUserProfile.id);var t=e.target.files[0],s=new FormData;s.append("image",t),s.append("contentType","image"),s.append("message",this.messageContent),s.append("chatId",this.chatId),s.append("recieverId",this.recieverId),this.messageContent="",this.$store.dispatch("sendFile",s)},pickAttachment:function(){document.getElementById("imageInput").click()},isMyMessage:function(e){return e.senderId===this.myUserProfile.id+""},decodeTextMessage:function(e){return e=(e=e.replace(/\+/g,"%20")).replace(/\<br>/g,"\n"),decodeURIComponent(e)},scrollToElement:function(){var e=this.$refs.scrollToMe;e&&e.scrollIntoView({behavior:"smooth"})}}};const p=(0,s(1900).Z)(d,(function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"fill-height pa-0",staticStyle:{"max-height":"73vh"},attrs:{"fill-height":"",height:"100%"}},[e.activeChat?t("v-responsive",{staticClass:"overflow-y-hidden fill-height"},[t("v-card",{staticClass:"d-flex flex-column fill-height",attrs:{flat:""}},[t("v-card-title",[t("v-list-item",{staticStyle:{"text-decoration":"none"},attrs:{to:"/userPublicProfile?userIndex=".concat("SINGLE_CAST"!==e.getChatDetails.chatType?(e.userSelected.id===e.getChatDetails.chatSenderId?e.getChatDetails.chatSenderId:e.userSelected.id)!==e.myUserProfile.id?e.userSelected.id:e.getChatDetails.chatSenderId:e.userSelected.id)}},[t("v-list-item-avatar",["SINGLE_CAST"===e.getChatDetails.chatType&&void 0===e.userSelected.profile_picture?t("v-icon",[e._v("mdi-account-outline")]):t("v-img",{staticClass:"card-img",attrs:{src:"".concat(e.uploads).concat("SINGLE_CAST"!==e.getChatDetails.chatType?e.userSelected.id===e.getChatDetails.chatSenderId?e.getChatDetails.logoUrl:e.userSelected.id!==e.myUserProfile.id?e.userSelected.profile_picture:e.getChatDetails.logoUrl:e.userSelected.profile_picture)}})],1),e._v(" "),t("v-list-item-content",{staticClass:"text-truncate title"},[t("h6",{staticClass:"font-weight-light mb-0"},[e._v("\n              "+e._s("SINGLE_CAST"!==e.getChatDetails.chatType?e.userSelected.id===e.getChatDetails.chatSenderId?e.getChatDetails.label:e.userSelected.id!==e.myUserProfile.id?"CC: "+e.userSelected.name:e.getChatDetails.label:e.userSelected.name)+"\n            ")]),e._v(" "),t("span",{staticClass:"overline"},[e._v(e._s("SINGLE_CAST"!==e.getChatDetails.chatType?e.userSelected.id===e.getChatDetails.chatSenderId?e.getChatDetails.description:e.userSelected.id!==e.myUserProfile.id?"last seen "+e.userSelected.lastSeen:e.getChatDetails.description:"last seen "+e.userSelected.lastSeen))])])],1)],1),e._v(" "),t("v-container",{ref:"scrollToMe",staticClass:"flex-grow-1 overflow-y-auto",attrs:{"fill-height":""}},[t("v-card-text",e._l(e.conversations,(function(s,i){return t("div",{key:i},[[t("div",{class:{"d-flex flex-row-reverse":e.isMyMessage(s)}},[t("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on;return[t("v-hover",{scopedSlots:e._u([{key:"default",fn:function(i){var r=i.hover;return["text"===s.contentType?t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[e._v("\n                        "+e._s(e.decodeTextMessage(s.message))+"\n                        "),t("sub",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                          "+e._s(s.sentTime)+"\n                        ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1):"location"===s.contentType?t("v-chip",{staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},[t("a",{attrs:{href:"https://www.google.com/maps/search/?api=1&query=".concat(s.mLatitude,"%2C").concat(s.mLongitude),target:"__APP"}},[t("v-img",{attrs:{src:"".concat(e.uploads).concat(s.mImage)}},[t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                              "+e._s(s.sentTime)+"\n                            ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)],1)]):"image"===s.contentType?t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal","max-width":"70%"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[t("v-img",{attrs:{src:"".concat(e.uploads).concat(s.message)}},[t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                            "+e._s(s.sentTime)+"\n                          ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)],1):"audio"===s.contentType?t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[t("audio",{ref:"player-".concat(s.message),refInFor:!0,attrs:{controls:"",src:e.uploads+s.message,type:"audio/mpeg"}},[t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                            "+e._s(s.sentTime)+"\n                          ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)]):"contact"===s.contentType?t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[t("div",[e._v("\n                          Phone Contact (Download Our App To View This\n                          Contact)\n                          "),t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                            "+e._s(s.sentTime)+"\n                          ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)]):"file"===s.contentType?t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[t("a",{attrs:{href:e.uploads+s.message,target:"__APP"}},[t("v-img",{attrs:{src:"".concat(e.folder_logo),width:"200",height:"200"}},[t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                              "+e._s(s.sentTime)+"\n                            ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)],1)]):t("v-chip",e._g({staticClass:"pa-4 mb-2",staticStyle:{height:"auto","white-space":"normal"},attrs:{color:e.isMyMessage(s)?"primary":"",dark:""}},a),[t("v-img",{attrs:{src:"".concat(e.uploads).concat(s.message)}},[t("div",{staticClass:"ml-2",staticStyle:{"font-size":"0.5rem"}},[e._v("\n                            "+e._s(s.sentTime)+"\n                          ")]),e._v(" "),r?t("v-icon",{attrs:{small:""}},[e._v(" fa-expand ")]):e._e()],1)],1)]}}],null,!0)})]}}],null,!0)},[e._v(" "),t("v-list",[t("v-list-item",[t("v-list-item-title",[e._v("Delete")]),e._v(" "),t("v-list-item-title",[e._v("Reply")]),e._v(" "),t("v-list-item-title",[e._v("Report")])],1)],1)],1)],1)]],2)})),0)],1),e._v(" "),t("v-footer",[t("input",{attrs:{type:"file",id:"imageInput",hidden:""},on:{change:e.handleImageChange}}),e._v(" "),t("v-card-text",{staticClass:"flex-shrink-1"},[t("v-text-field",{attrs:{label:"Type a message",type:"text","no-details":"",outlined:"","append-icon":"mdi-paperclip","append-outer-icon":"mdi-send","hide-details":""},on:{"click:append":e.pickAttachment,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SendMessage.apply(null,arguments)},"click:append-outer":e.SendMessage},model:{value:e.messageContent,callback:function(t){e.messageContent=t},expression:"messageContent"}})],1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports},1900:(e,t,s)=>{"use strict";function i(e,t,s,i,a,r,n,o){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=s,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},l._ssrRegister=c):a&&(c=o?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(e,t){return c.call(t),h(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}s.d(t,{Z:()=>i})}}]);
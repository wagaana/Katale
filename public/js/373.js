"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[373],{373:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var r=a(629),n=a(538);a(2640);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c={props:["campaignTarget"],data:function(){return{table:"",param:{field:null,mCondition:null,value:null},rules:[function(e){return e<=40||"Exclude 40% of the records"}],params:[],queryParams:[{id:"id",label:"User Id"},{id:"email",label:"Email Address"},{id:"phone",label:"Phone Number"},{id:"name",label:"User Name"},{id:"email_verified",label:"Email Varified"},{id:"level",label:"User level"},{id:"dob",label:"Date Of Birth"},{id:"gender",label:"User Gender"},{id:"created_at",label:"Join Date"}],tableHeaders:[{text:"Table field",value:"field"},{text:"Query Condition",value:"mCondition"},{text:"Query Value",value:"value"},{text:"Action",value:"action"}],conditions:[{id:"=",label:"Equal To"},{id:">",label:"Greater Than"},{id:"<",label:"Less Than"}]}},computed:l({},(0,r.Se)([])),watch:{campaignTarget:function(e){null!==e&&(console.log(e),this.params=e)}},methods:l(l({},(0,r.nv)([])),{},{getTarget:function(){return this.params},getConditionLabel:function(e){return this.conditions.find((function(t){return t.id===e})).label},deleteParam:function(e){var t=this.params.indexOf(e);t>=0&&this.params.splice(t,1)}})};var u=a(1900);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f={components:{CampaignTargetComponent:(0,u.Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"col-md-12 col-12"},[t("label",[e._v("Query parameters")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("v-select",{attrs:{items:e.queryParams,"item-text":"label","item-value":"id",label:"Table field",placeholder:"Select Table field",dense:"",outlined:""},model:{value:e.param.field,callback:function(t){e.$set(e.param,"field",t)},expression:"param.field"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("v-select",{attrs:{items:e.conditions,"item-text":"label","item-value":"id",label:"Query condition",placeholder:"Select Query condition",dense:"",outlined:""},model:{value:e.param.mCondition,callback:function(t){e.$set(e.param,"mCondition",t)},expression:"param.mCondition"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("v-text-field",{attrs:{label:"Query Value",placeholder:"Select Query value",dense:"",outlined:""},model:{value:e.param.value,callback:function(t){e.$set(e.param,"value",t)},expression:"param.value"}})],1),e._v(" "),t("div",{staticClass:"col-md-3"},[t("v-btn",{attrs:{color:"primary",block:"",depressed:""},on:{click:function(t){e.params.push(e.param),e.param={}}}},[e._v("Set condition")])],1)]),e._v(" "),e.params.length>0?t("v-data-table",{attrs:{headers:e.tableHeaders,items:e.params},scopedSlots:e._u([{key:"item.mCondition",fn:function(t){return[e._v("\n                "+e._s(e.getConditionLabel(t.item.mCondition))+"\n            ")]}},{key:"item.action",fn:function(a){return[t("v-btn",{attrs:{color:"error",small:"",depressed:""},on:{click:function(t){return e.deleteParam(a.item)}}},[e._v("\n                    Delete\n                    "),t("v-icon",{attrs:{right:""}},[e._v("mdi-delete-forever")])],1)]}}],null,!1,574696235)}):e._e()],1)])}),[],!1,null,null,null).exports},data:function(){return{campaignTarget:{target:null},e6:1,temp:{},action:"",activeTableMappings:[{id:"name",label:"User Name"},{id:"email",label:"Email"},{id:"wallet_balance",label:"Wallet Balance"},{id:"level",label:"Level"}]}},created:function(){"viewTarget"===this.$route.query.action&&(this.action=this.$route.query.action,this.$store.dispatch("loadCampaignTargetDetails",this.$route.query.targetID)),this.$store.dispatch("loadSystemTemplates")},computed:d(d({validateFieldsCampaignDetailsForm:function(){var e=!0;return void 0!==this.campaignTarget.label&&""!==this.campaignTarget.label||(e=!1),void 0!==this.campaignTarget.description&&""!==this.campaignTarget.description||(e=!1),e}},(0,r.rn)(["isUpdating","campaignTargetDetails"])),(0,r.Se)(["messageAlert","getUpdatingStatus","getCampaignTargetDetails"])),watch:{messageAlert:function(e){null!=e&&(n.default.notify({group:"foo",type:e.type,text:e.body}),this.$router.push({path:"/admin/marketingCampaigns/campaignTargets",query:{}}))},getCampaignTargetDetails:function(e){null!=e&&(this.campaignTarget=e)}},methods:d(d({},(0,r.nv)(["uploadCampaignTestData"])),{},{validateTargetForm:function(){return this.$refs.campaignTarget.getTarget().length>0},displayFormError:function(e){n.default.notify({group:"foo",title:"Error",text:e,type:"error"})},submitCampaignTarget:function(e){this.campaignTarget.target=this.$refs.campaignTarget.getTarget(),console.log("submitCampaignTarget",this.campaignTarget),this.$store.dispatch("submitCampaignTarget",this.campaignTarget)},updateCampaignTarget:function(e){this.campaignTarget.target=this.$refs.campaignTarget.getTarget(),console.log("updateCampaignTarget",this.campaignTarget),this.$store.dispatch("updateCampaignTarget",this.campaignTarget)}})};const v=(0,u.Z)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",[t("v-stepper",{attrs:{vertical:""},model:{value:e.e6,callback:function(t){e.e6=t},expression:"e6"}},[t("v-stepper-step",{attrs:{complete:e.e6>1,step:"1"}},[e._v("\n        Campaign Target Details\n        "),t("small",[e._v("Describe your target below.")])]),e._v(" "),t("v-stepper-content",{attrs:{step:"1"}},[t("v-card",{staticClass:"mb-12"},[t("v-container",[t("v-text-field",{attrs:{label:"Campaign Target Name",outlined:"",dense:""},model:{value:e.campaignTarget.label,callback:function(t){e.$set(e.campaignTarget,"label",t)},expression:"campaignTarget.label"}}),e._v(" "),t("v-textarea",{attrs:{label:"Campaign Target Description",outlined:"",dense:""},model:{value:e.campaignTarget.description,callback:function(t){e.$set(e.campaignTarget,"description",t)},expression:"campaignTarget.description"}})],1)],1),e._v(" "),t("v-btn",{staticClass:"md-1 px-6"},[e._v("Cancel")]),e._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:function(t){0!=e.validateFieldsCampaignDetailsForm?e.e6=2:e.displayFormError("Please fill all required Fields.")}}},[e._v("Continue")])],1),e._v(" "),t("v-stepper-step",{attrs:{complete:e.e6>2,step:"3"}},[e._v("Configure Target.")]),e._v(" "),t("v-stepper-content",{attrs:{step:"2"}},[t("v-card",{staticClass:"mb-12"},[t("v-container",[t("CampaignTargetComponent",{ref:"campaignTarget",attrs:{campaignTarget:e.campaignTarget.target}})],1)],1),e._v(" "),t("v-btn",{staticClass:"md-1 px-6",on:{click:function(t){e.e6=1}}},[e._v("Back")]),e._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:function(t){0!=e.validateTargetForm()?e.submitCampaignTarget():e.displayFormError("Please configure target.")}}},[e._v("Continue")])],1)],1)],1)])}),[],!1,null,null,null).exports},1900:(e,t,a)=>{function r(e,t,a,r,n,i,o,l){var s,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=s):n&&(s=l?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,s):[s]}return{exports:e,options:c}}a.d(t,{Z:()=>r})}}]);
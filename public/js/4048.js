"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4048],{4048:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(629),l=a(538);a(2640);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={data:function(){return{newTemplate:{parameters:[]},action:null,activeParameter:{},parameter:{},dialogParameter:!1,inputTypes:[{id:"text",label:"Text",value:"text"},{id:"string",label:"String",value:"string"},{id:"file",label:"Image File",value:"file"}],inputVariables:[],tableHeaders:[{text:"Type",value:"inputType"},{text:"Label",value:"label"},{text:"Value",value:"value"}],valid:!1,rules:{required:function(e){return!!e||"This field is required"},email:function(e){return/.+@.+\..+/.test(e)||"Must be a valid email"}}}},created:function(){"vewTemplate"===this.$route.query.action&&(this.action=this.$route.query.action,this.$store.dispatch("loadTemplateDetails",this.$route.query.id))},computed:s(s({},(0,r.rn)(["allTemplates","templateDetails"])),(0,r.Se)(["getAllTemplates","getTemplateDetails","messageAlert"])),watch:{messageAlert:function(e){null!=e&&(l.default.notify({group:"foo",type:e.type,title:e.title,text:e.body}),"OK"===e.body&&this.$router.push({path:"/admin/marketingCampaigns/campaignTemplates",query:{}}))},getTemplateDetails:function(e){if(null!=e)try{this.newTemplate=e,this.getTemplateVariables(this.getTemplateDetails.html)}catch(e){}}},methods:{SubmitTemplate:function(){this.$refs.templateForm.validate()&&this.newTemplate.parameters.length>0?this.$store.dispatch("submitTemplate",this.newTemplate):l.default.notify({group:"foo",type:"error",title:"Error",text:"Set all template variables to continue..."})},UpdateTemplate:function(){this.$refs.templateForm.validate()&&this.newTemplate.parameters.length>0?this.$store.dispatch("updateTemplate",this.newTemplate):l.default.notify({group:"foo",type:"error",title:"Error",text:"Set all template variables to continue..."})},loadParameter:function(e){this.activeParameter=e,this.dialogParameter=!0},deleteParameter:function(e){this.newTemplate.parameters=this.newTemplate.parameters.filter((function(t){return t.label!=e.label})),this.dialogParameter=!1},displayError:function(){l.default.notify({group:"foo",type:"error",title:"Error",text:"All fields are required"})},getTemplateVariables:function(e){var t=[];try{for(var a in e=e.match(/\%[^}\s]+\%/g||0)){var r=!0;for(var l in this.newTemplate.parameters)if(this.newTemplate.parameters[l].value===e[a]){r=!1;break}r&&t.push(e[a])}}catch(e){}return t}}};const c=(0,a(1900).Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-10 pr-md-1 sm-6"},["vewTemplate"!==e.action?t("h1",{staticClass:"font-weight-light white--text"},[e._v("\n          Create Template\n        ")]):t("h1",{staticClass:"font-weight-light white--text"},[e._v("Update Template")])]),e._v(" "),t("div",{staticClass:"col-md-2 pr-md-1 fill-width"},["vewTemplate"!==e.action?t("v-btn",{staticClass:"primary font-weight-light",on:{click:e.SubmitTemplate}},[e._v("Submit Template")]):t("v-btn",{staticClass:"primary font-weight-light",on:{click:e.UpdateTemplate}},[e._v("Update Template")])],1),e._v(" "),t("div",{staticClass:"col-md-12 pr-md-1 fill-width"},[t("v-card",{staticClass:"mb-3"},[t("v-container",[t("div",{staticClass:"mb-3 row"},[t("div",{staticClass:"col-md-6"},[t("v-col",{attrs:{md:"12",sm:"12"}},[t("v-form",{ref:"templateForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-expansion-panels",{attrs:{value:0}},[t("v-expansion-panel",[t("v-expansion-panel-header",{scopedSlots:e._u([{key:"actions",fn:function(){return[t("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-up-circle")])]},proxy:!0}])},[e._v("\n                          Template Description\n                          ")]),e._v(" "),t("v-expansion-panel-content",[t("v-container",[t("v-text-field",{attrs:{label:"Template Name",outlined:"",dense:"",rules:[e.rules.required]},model:{value:e.newTemplate.label,callback:function(t){e.$set(e.newTemplate,"label",t)},expression:"newTemplate.label"}}),e._v(" "),t("v-textarea",{attrs:{label:"Template Description",outlined:"",dense:"",rules:[e.rules.required]},model:{value:e.newTemplate.description,callback:function(t){e.$set(e.newTemplate,"description",t)},expression:"newTemplate.description"}})],1)],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",{scopedSlots:e._u([{key:"actions",fn:function(){return[t("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-up-circle")])]},proxy:!0}])},[e._v("\n                          Template Html Content\n                          ")]),e._v(" "),t("v-expansion-panel-content",[t("v-textarea",{attrs:{label:"Template Html",outlined:"",dense:"",rules:[e.rules.required]},model:{value:e.newTemplate.html,callback:function(t){e.$set(e.newTemplate,"html",t)},expression:"newTemplate.html"}})],1)],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",{scopedSlots:e._u([{key:"actions",fn:function(){return[t("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-up-circle")])]},proxy:!0}])},[e._v("\n                          Template Parameters\n                          ")]),e._v(" "),t("v-expansion-panel-content",[t("div",[t("label",[e._v("Query parameters")]),e._v(" "),t("v-row",[t("v-col",{attrs:{lg:"6"}},[t("v-text-field",{attrs:{label:"Label",outlined:"",dense:""},model:{value:e.parameter.label,callback:function(t){e.$set(e.parameter,"label",t)},expression:"parameter.label"}})],1),e._v(" "),t("v-col",{attrs:{lg:"6"}},[t("v-text-field",{attrs:{label:"Place Holder",outlined:"",dense:""},model:{value:e.parameter.placeHolder,callback:function(t){e.$set(e.parameter,"placeHolder",t)},expression:"parameter.placeHolder"}})],1)],1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("v-select",{attrs:{items:e.inputTypes,"item-text":"label","item-value":"id",label:"Type",dense:"",outlined:""},model:{value:e.parameter.inputType,callback:function(t){e.$set(e.parameter,"inputType",t)},expression:"parameter.inputType"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("v-select",{attrs:{items:e.getTemplateVariables(e.newTemplate.html),label:"Variable",dense:"",outlined:""},model:{value:e.parameter.value,callback:function(t){e.$set(e.parameter,"value",t)},expression:"parameter.value"}})],1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("v-btn",{attrs:{color:"primary",block:"",depressed:""},on:{click:function(t){void 0!==e.parameter.value&void 0!==e.parameter.label&void 0!==e.parameter.placeHolder?e.newTemplate.parameters.push(e.parameter):e.displayError(),e.parameter={}}}},[e._v("Set")])],1)]),e._v(" "),t("div",{staticClass:"py-4"},[e.newTemplate.parameters.length>0?t("v-data-table",{attrs:{headers:e.tableHeaders,items:e.newTemplate.parameters},scopedSlots:e._u([{key:"item",fn:function(a){var r=a.item;return[t("tr",{on:{click:function(t){return e.loadParameter(r)}}},[t("td",[e._v("\n                                      "+e._s(r.inputType)+"\n                                    ")]),e._v(" "),t("td",[e._v("\n                                      "+e._s(r.label)+"\n                                    ")]),e._v(" "),t("td",[e._v("\n                                      "+e._s(r.value)+"\n                                    ")])])]}}],null,!1,1437271787)}):e._e()],1),e._v(" "),e.newTemplate.parameters.length>0?t("div",{staticClass:"row px-4 pb-2 d-flex justify-content-end align-items-end"}):e._e()],1)])],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"col-md-6 col"},[t("div",{staticClass:"col-md-12"},[t("v-card",{staticClass:"col-md-12"},[t("div",{domProps:{innerHTML:e._s(e.newTemplate.html)}})])],1)])])])],1)],1)]),e._v(" "),t("v-dialog",{attrs:{width:"340"},model:{value:e.dialogParameter,callback:function(t){e.dialogParameter=t},expression:"dialogParameter"}},[t("v-card",[t("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v("\n          "+e._s(e.activeParameter.label)+"\n        ")]),e._v(" "),t("v-divider"),e._v(" "),t("v-card",{staticClass:"pa-5"},[t("v-card-text",[t("p",[e._v("Type: "+e._s(e.activeParameter.inputType))]),e._v(" "),t("p",[e._v("Value: "+e._s(e.activeParameter.value))]),e._v(" "),t("p",[e._v(e._s(e.activeParameter.placeHolder))])])],1),e._v(" "),t("v-card-actions",{staticClass:"pa-5"},[t("v-btn",{staticClass:"ml-auto",attrs:{outlined:"",color:"red"},on:{click:function(t){return e.deleteParameter(e.activeParameter)}}},[e._v("Delete")])],1)],1)],1)],1)])}),[],!1,null,null,null).exports},1900:(e,t,a)=>{function r(e,t,a,r,l,i,n,s){var o,p="function"==typeof e?e.options:e;if(t&&(p.render=t,p.staticRenderFns=a,p._compiled=!0),r&&(p.functional=!0),i&&(p._scopeId="data-v-"+i),n?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},p._ssrRegister=o):l&&(o=s?function(){l.call(this,(p.functional?this.parent:this).$root.$options.shadowRoot)}:l),o)if(p.functional){p._injectStyles=o;var c=p.render;p.render=function(e,t){return o.call(t),c(e,t)}}else{var m=p.beforeCreate;p.beforeCreate=m?[].concat(m,o):[o]}return{exports:e,options:p}}a.d(t,{Z:()=>r})}}]);
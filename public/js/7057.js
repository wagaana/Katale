"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7057],{7057:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s(629),r=s(2640);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function n(e,t,s){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={data:function(){return{file:null,uploads:r.q6,newUser:{},activeUser:{},composeMessage:{},dialogAddNewUser:!1,dialogComposeEmail:!1,viewUserProfile:!1,valid:!1,rules:{required:function(e){return!!e||"This field is required"},email:function(e){return/.+@.+\..+/.test(e)||"Must be a valid email"}},headers:[{text:"Image",value:"imageTitle"},{text:"Name",align:"left",sortable:!1,value:"name"},{text:"Email",value:"email"},{text:"Level",value:"level"},{text:"Date Added",value:"timeAdded"}],systemUserLevels:[{id:"OWNER",label:"System Owner"},{id:"EDITOR",label:"System Editor"},{id:"VIEWER",label:"System Viewer"}]}},beforeCreate:function(){this.$store.dispatch("getAdminUsers"),this.$store.dispatch("fetchMyServicePoints")},computed:o(o({},(0,i.rn)(["myCompanyUsers","myServicePints"])),(0,i.Se)(["getMyCompanyUsers","getMyServicePints"])),methods:{loadUserProfile:function(e){this.activeUser=e,this.viewUserProfile=!0},deleteUser:function(e){alert("Deleting")},composeEmail:function(e){this.viewUserProfile=!1,this.dialogComposeEmail=!0},openAdminDetails:function(e){this.$router.push({path:"/admin/customers/"+e.id,query:{userId:e.id}})},validateEmail:function(){this.$refs.sendForm.validate()&&this.sendEmail(this.newUser)},sendEmail:function(){alert("Sending")},validate:function(){this.$refs.sendForm.validate()&&this.createUser(this.newUser)},createUser:function(e){this.dialogAddNewUser=!1,this.$store.dispatch("submitSystemAdmin",e)}}};const d=(0,s(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",[t("v-row",[t("v-col",{staticClass:"col-md-10 pr-md-1 sm-6"},[t("h1",{staticClass:"font-weight-light mb-2"},[e._v("System Users")]),e._v(" "),t("span",{staticClass:"overline"},[e._v("Manage System Users here")])]),e._v(" "),t("v-col",{staticClass:"col-md-2 pr-md-1 fill-width"},[t("v-btn",{staticClass:"primary",on:{click:function(t){e.dialogAddNewUser=!0}}},[e._v("New")])],1)],1),e._v(" "),t("v-card",{staticClass:"py-2 pa-0"},[t("v-data-table",{attrs:{headers:e.headers,items:e.getMyCompanyUsers,"item-key":"id"},scopedSlots:e._u([{key:"item",fn:function(s){var i=s.item;return[t("tr",{on:{click:function(t){return e.loadUserProfile(i)}}},[t("td",[t("img",{attrs:{src:"".concat(e.uploads).concat(i.profile_picture),width:"30px",height:"30px"}})]),e._v(" "),t("td",[e._v(e._s(i.name))]),e._v(" "),t("td",[e._v(e._s(i.email))]),e._v(" "),t("td",[e._v(e._s(i.level))]),e._v(" "),t("td",[e._v(e._s(i.created_at))])])]}}])})],1),e._v(" "),t("v-dialog",{attrs:{width:"500"},model:{value:e.dialogAddNewUser,callback:function(t){e.dialogAddNewUser=t},expression:"dialogAddNewUser"}},[t("v-card",[t("v-card-title",{staticClass:"headline black",attrs:{"primary-title":""}},[e._v("\n          New User\n        ")]),e._v(" "),t("v-card-text",{staticClass:"pa-5"},[t("v-form",{ref:"sendForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"User Email",rules:[e.rules.required,e.rules.email],autocomplete:"email",outlined:"",dense:""},model:{value:e.newUser.email,callback:function(t){e.$set(e.newUser,"email",t)},expression:"newUser.email"}}),e._v(" "),t("v-select",{attrs:{items:e.systemUserLevels,label:"Select Level","item-text":"label","item-value":"id",rules:[e.rules.required],outlined:"",dense:""},model:{value:e.newUser.level,callback:function(t){e.$set(e.newUser,"level",t)},expression:"newUser.level"}})],1)],1),e._v(" "),t("v-card-actions",{staticClass:"pa-5"},[t("v-btn",{staticClass:"ml-auto",attrs:{outlined:"",color:"primary"},on:{click:function(t){e.dialogAddNewUser=!1}}},[e._v("Cancel")]),e._v(" "),t("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:e.validate}},[e._v("Add User")])],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{width:"400"},model:{value:e.viewUserProfile,callback:function(t){e.viewUserProfile=t},expression:"viewUserProfile"}},[t("v-card",[t("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v("\n          "+e._s(e.activeUser.name)+"\n        ")]),e._v(" "),t("v-card-title",[t("v-img",{attrs:{src:"".concat(e.uploads).concat(e.activeUser.profilePicture),width:"350px"}})],1),e._v(" "),t("v-card-text",{staticClass:"pa-5"},[t("p",[e._v("\n            EMAIL: "+e._s(e.activeUser.email)+"\n            "),t("br"),e._v("\n            DATE: "+e._s(e.activeUser.created_at)+"\n            "),t("br"),e._v("\n            LEVEL: "+e._s(e.activeUser.level)+"\n          ")])]),e._v(" "),t("v-card-actions",{staticClass:"pa-5"},[t("v-btn",{attrs:{color:"red",outlined:""},on:{click:function(t){return e.deleteUser(e.activeUser)}}},[e._v("Delete")]),e._v(" "),t("v-btn",{staticClass:"ml-auto",attrs:{outlined:"",color:"green"},on:{click:function(t){return e.openAdminDetails(e.activeUser)}}},[e._v("Details")]),e._v(" "),t("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:function(t){return e.composeEmail(e.activeUser)}}},[e._v("Email")])],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{width:"500"},model:{value:e.dialogComposeEmail,callback:function(t){e.dialogComposeEmail=t},expression:"dialogComposeEmail"}},[t("v-card",[t("v-card-title",{staticClass:"headline black",attrs:{"primary-title":""}},[e._v("\n          Compose Message\n        ")]),e._v(" "),t("v-card-text",{staticClass:"pa-5"},[t("v-form",{ref:"sendForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"To",disabled:"",rules:[e.rules.required,e.rules.email]},model:{value:e.activeUser.email,callback:function(t){e.$set(e.activeUser,"email",t)},expression:"activeUser.email"}}),e._v(" "),t("v-text-field",{attrs:{label:"Subject",rules:[e.rules.required]},model:{value:e.composeMessage.subject,callback:function(t){e.$set(e.composeMessage,"subject",t)},expression:"composeMessage.subject"}}),e._v(" "),t("v-textarea",{attrs:{rules:[e.rules.required],label:"Message"},model:{value:e.composeMessage.body,callback:function(t){e.$set(e.composeMessage,"body",t)},expression:"composeMessage.body"}})],1)],1),e._v(" "),t("v-card-actions",{staticClass:"pa-5"},[t("v-btn",{staticClass:"ml-auto",attrs:{outlined:"",color:"primary"},on:{click:function(t){e.dialogComposeEmail=!1}}},[e._v("Cancel")]),e._v(" "),t("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:e.validateEmail}},[e._v("Send")])],1)],1)],1)],1)])}),[],!1,null,null,null).exports},1900:(e,t,s)=>{function i(e,t,s,i,r,a,l,o){var n,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),l?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=n):r&&(n=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),n)if(c.functional){c._injectStyles=n;var d=c.render;c.render=function(e,t){return n.call(t),d(e,t)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,n):[n]}return{exports:e,options:c}}s.d(t,{Z:()=>i})}}]);